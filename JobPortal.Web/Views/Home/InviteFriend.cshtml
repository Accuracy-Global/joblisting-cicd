@model JobPortal.Web.Models.InviteFriendModel
@using JobPortal.Data
@using JobPortal.Domain
@{
    string pattern = @"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,3}$";
}
<div class="clear" style="height:30px"></div>
<div class="invite-friend">
    <div class="sub-heading">
        <h2>Invite Your Friend</h2>
    </div>
    <div class="iyf">
        @using (Html.BeginForm("inviteviaemail", "Network", FormMethod.Post))
            {
        
            <div><small>Invite via Email</small></div>
            <div class="input-group">
                <input type="text" id="EmailAddress" name="EmailAddress" class="form-control" placeholder="EMAIL ADDRESS" maxlength="50" title="Provide Email Address" required oninvalid="this.setCustomValidity('Provide Email Address')" oninput="this.setCustomValidity('')" pattern="@pattern" />
                @*@Html.TextBoxFor(m => m.EmailAddress, new { @class = "form-control", placeholder = "EMAIL ADDRESS", maxlength = "50", title = "Provide Email Address", required = "required" })*@
                <span class="input-group-btn">
                    <button type="submit"  class="btn btn-default" value="Invite">Invite</button>
                </span>
            </div>
            <small>@Html.ValidationMessageFor(m => m.EmailAddress)</small>
        
        }
    </div>
    <div class="iyf">
        <div class="clear" style="height:15px"></div>
        @using (Html.BeginForm("InviteFriend", "Network", FormMethod.Post))
        {
            <div><small>Invite via Mobile</small></div>
            @Html.DropDownList("Country", new SelectList(SharedService.Instance.GetCountryList(), "Code", "Text"), new { @class = "form-control", @required = "required" })
            <div class="clear" style="height:5px"></div>
            <div class="input-group">
                <span class="input-group-addon" id="CountryCode" style="width:50px; font-size:small; color:#000;"></span>
                @Html.TextBoxFor(m => m.Mobile, new { @class = "form-control", placeholder = "MOBILE NUMBER", maxlength = "15", title = "Provide Mobile Number", required = "required" })
                <span class="input-group-btn">
                    <input type="submit" class="btn btn-default" value="Invite" formtarget="_blank" />
                </span>
            </div>
            <small>@Html.ValidationMessageFor(m => m.Mobile)</small>
        }
    </div>
</div>
<script>
    $(function () {
        $("#CountryCode").text("+" + $("#Country").val());
        $("#Country").change(function () {
            $("#CountryCode").text("+" + $(this).val());
        });

        $("#InviteViaEmail").click(function () {
            var input = $("#InviteViaEmailForm").serializeObject();
            var flag = $("#InviteViaEmailForm")[0].checkValidity();
            if (flag) {
                $.post("/network/inviteviaemail", input, function (result) {                    
                    if (result.Id > 0) {
                        toastr.info(result.Message);
                    } else {
                        toastr.error(result.Message);
                    }
                });
                return false;
            }
        });
    })
</script>