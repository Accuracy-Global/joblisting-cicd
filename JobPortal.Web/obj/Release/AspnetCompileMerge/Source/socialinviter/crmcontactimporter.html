<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="//socialinviter.com/assets/js/src/socialinviter.js"></script>
    <style type="text/css">
        .hiddenBtn{width:0;height:0;position:absolute;left:-2000px}
        .rowHeader{background-color:#eee;color:#000;font-weight:700;line-height:30px;padding-left:10px;font-size:16px;margin-top:40px;margin-bottom:20px}
        body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;padding-bottom:10px;color:#5a5a5a;font-size:14px}
        .label{width:120px}.text{width:300px;border-radius:4px;border:1px solid #DDD;padding:5px}
        .text-lg,textarea{width:400px;border-radius:4px}
        .text-lg{border:1px solid #DDD;padding:5px}
        table tr td{padding-top:3px;padding-bottom:3px;padding-right:10px}
        .btn{background-color:#2154B0;cursor:pointer;color:#fff;border:0;padding:5px 10px;border-radius:4px;line-height:21px}
        textarea{height:200px;border:1px solid #D0CDCD}
        .select{width:200px;border-radius:4px;border:1px solid #DDD;padding:5px}
        .fr{float:right}
        .fl{float:left}
        .posrel{position:relative}
        .posabs{position:absolute}
        .text-primary{color:Orange}
        .center{margin:0 auto;text-align:center}
        .backholder{width:200px;right:0;top:-30px}
        .backholder a{color:Red}.outlook,.directlogin,#portalid{display:none}
        .loading{background-image:url(blueloading.gif);position:fixed;width:100%;height:100%;background-repeat:no-repeat;background-position:center;display:none;}
    </style>
</head>
<body>
            <div class="loading"></div>
            <h1 class="text-primary center">
                Check out our demo</h1>
            <div class="fr posrel">
                <div class="posabs backholder">
                    <a href="index.html">Back to products</a></div>
            </div>
            <div class="enguser center">
                <h2>Promote Your website with the Best Social Tools on the Web.</h2>
            </div>
            <hr />
            <h2 class="text-primary">CRM Contact Importer REST API example</h2>
            <div class="rowHeader nonoutlook">
                Step1 : Getting Authentication Url
            </div>
            <div class="rowHeader outlook">
                Step1 : Get CSV Contacts
            </div>
            <table>
                <tr>
                    <td class="label">
                        Service
                    </td>
                    <td>
                        :
                    </td>
                    <td>
                        <select class="select" onchange="changeService()" id="ddnservice">
                            <option value="gmail">Gmail</option>
                            <option value="yahoo">Yahoo</option>
                            <option value="outlook">Outlook</option>
                            <option value="mailru">Mail.ru</option>
                            <option value="eventbrite">Eventbrite</option>
                            <option value="mailchimp">MailChimp</option>
                            <option value="csv">CSV</option>

                            <option value="salesforce">Salesforce</option>
                            <option value="base">Base</option>
                            <option value="zoho">Zoho</option>
                            <option value="hubspot">Hubspot</option>
                            <option value="nimble">Nimble</option>
                            <option value="podio">Podio</option>
                            <option value="pipedrive">Pipedrive</option>
                            <option value="karma">Karma</option>
                            <option value="onepage">Onepage</option>
                            <option value="xero">Xero</option>
                            <option value="contactually">Contactually</option>
                        </select>
                    </td>
                </tr>
                <tr class="nonoutlook">
                    <td>
                        Consumer key
                    </td>
                    <td>
                        :
                    </td>
                    <td>
                        <input type="text" class="text" runat="server" id="authConsumerKey" />
                    </td>
                </tr>
                <tr class="nonoutlook">
                    <td>
                        Consumer secret
                    </td>
                    <td>
                        :
                    </td>
                    <td>
                        <input type="text" class="text" runat="server" id="authConsumerSecret" />
                    </td>
                </tr>
                <tr id="portalid">
                    <td>
                        Portal id
                    </td>
                    <td>
                        :
                    </td>
                    <td>
                        <input type="text" class="text" id="txtportalid" runat="server" />
                    </td>
                </tr>
                <tr class="nonoutlook">
                    <td>
                        Redirect Url
                    </td>
                    <td>
                        :
                    </td>
                    <td>
                        <input type="text" class="text" runat="server" id="authRedirectUrl" />
                    </td>
                </tr>
                <tr>
                    <td>
                        Formatted key
                    </td>
                    <td>
                        :
                    </td>
                    <td>
                        <input type="text" class="text" runat="server" id="formattedKey" />
                    </td>
                </tr>
                <tr class="nonoutlook">
                    <td colspan="2">
                    </td>
                    <td>
                        <input type="button" class="btn" value="Get authentication url" onclick="getAuthUrl()" />
                    </td>
                </tr>
                <tr class="outlook">
                    <td>
                        CSV file url
                    </td>
                    <td>
                        :
                    </td>
                    <td>
                        <input type="text" class="text" id="txtcsvurl" runat="server" />
                        <div>
                            (cannot be a localhost file, please provide the url of an online file eg: http://yourdomain.com/xxxx.csv)</div>
                    </td>
                </tr>
                <tr class="outlook">
                    <td colspan="2">
                    </td>
                    <td>
                        <input type="button" class="btn" value="Get contacts" onclick="getOutlookContacts()" />
                    </td>
                </tr>
                <tr class="nonoutlook">
                    <td colspan="3">
                        <table>
                            <tr>
                                <td>
                                    API Request
                                </td>
                                <td>
                                    API Response
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <textarea runat="server" id="authRequest"></textarea>
                                </td>
                                <td>
                                    <textarea runat="server" id="authResponse"></textarea>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr class="outlook">
                    <td colspan="3">
                        <table>
                            <tr>
                                <td>
                                    API Request
                                </td>
                                <td>
                                    API Response
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <textarea runat="server" id="csvRequest"></textarea>
                                </td>
                                <td>
                                    <textarea runat="server" id="csvResponse"></textarea>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            <div class="rowHeader nonoutlook step2">
                Step2 : Authenticating User
            </div>
            <div class="rowHeader directlogin directstep1">
                Step1 : Getting Access Token
            </div>
            <table class="directlogin">
                <tr>
                    <td class="label">
                        Email
                    </td>
                    <td>
                        :
                    </td>
                    <td>
                        <input type="text" class="text" id="txtemail" runat="server" />
                    </td>
                </tr>
                <tr>
                    <td>
                        Password
                    </td>
                    <td>
                        :
                    </td>
                    <td>
                        <input type="password" class="text" id="txtpassword" runat="server" />
                    </td>
                </tr>
                
                <tr >
                    <td colspan="2">
                    </td>
                    <td>
                        <input type="button" class="btn" value="Get access token" onclick="getAccessTokenDirect()" />
                    </td>
                </tr>
                <tr>
                    <td colspan="3">
                        <table>
                            <tr>
                                <td>
                                    API Request
                                </td>
                                <td>
                                    API Response
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <textarea runat="server" id="accessRequestDirect"></textarea>
                                </td>
                                <td>
                                    <textarea runat="server" id="accessResponseDirect"></textarea>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            <table class="nonoutlook">
                <tr>
                    <td class="label">
                        Authentication Url
                    </td>
                    <td>
                        :
                    </td>
                    <td>
                        <input type="text" class="text-lg" id="txtAuthUrl" runat="server" disabled="disabled" />
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                    </td>
                    <td>
                        <input type="button" class="btn" value="Authentication user" onclick="authUser()" />
                    </td>
                </tr>
            </table>
            <div class="rowHeader nonoutlook step3">
                Step3 : Getting Access Token
            </div>
            <table class="nonoutlook">
                <tr>
                    <td class="label">
                        Token
                    </td>
                    <td>
                        :
                    </td>
                    <td>
                        <input type="text" class="text" id="accToken" runat="server" />
                    </td>
                </tr>
                <tr>
                    <td>
                        Token secret
                    </td>
                    <td>
                        :
                    </td>
                    <td>
                        <input type="text" class="text" id="accTokenSecret" runat="server" />
                    </td>
                </tr>
                <tr>
                    <td>
                        Token Verifier
                    </td>
                    <td>
                        :
                    </td>
                    <td>
                        <input type="text" class="text" id="accTokenVerifier" runat="server" />
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                    </td>
                    <td>
                        <input type="button" class="btn" value="Get access token" onclick="getAccTok()" />
                    </td>
                </tr>
                <tr>
                    <td colspan="3">
                        <table>
                            <tr>
                                <td>
                                    API Request
                                </td>
                                <td>
                                    API Response
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <textarea runat="server" id="accessRequest"></textarea>
                                </td>
                                <td>
                                    <textarea runat="server" id="accessResponse"></textarea>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            <div class="rowHeader nonoutlook step4">
                Step4 : Getting Contacts
            </div>
            <div class="rowHeader directlogin step2direct">
                Step2 : Getting Contacts
            </div>
            <table class="nonoutlookcontacts">
    <tr>
        <td class="label">Token</td>
        <td>:</td>
        <td><input type="text" class="text" id="conToken" runat="server" /></td>
    </tr>
    <tr>
        <td>Token secret</td>
        <td>:</td>
        <td><input type="text" class="text" id="conTokenSecret" runat="server" /></td>
    </tr>
    <tr>
        <td>Token Verifier</td>
        <td>:</td>
        <td><input type="text" class="text" id="conTokenVerifier" runat="server" /></td>
    </tr>
    <tr>
        <td>User Id</td>
        <td>:</td>
        <td><input type="text" class="text" id="conUserId" runat="server" /></td>
    </tr>
    <tr>
        <td colspan="2"></td>
        <td>
            <input type="button" class="btn" value="Get contacts" onclick="getContacts()"/>
        </td>
    </tr>
    <tr>
        <td colspan="3">
            <table>
                <tr>
                    <td>
                        API Request
                    </td>
                    <td>
                        API Response
                    </td>
                </tr>
                <tr>
                    <td>
                        <textarea runat="server" id="conRequest"></textarea>
                    </td>
                    <td>
                        <textarea runat="server" id="conResponse"></textarea>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

    <script type="text/javascript">
        var getQueryString = function (name, target) {
            name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
            var regexS = "[\\?&]" + name + "=([^&#]*)";
            var regex = new RegExp(regexS);
            var results = regex.exec(target);
            if (results == null)
                return "";
            else
                return decodeURIComponent(results[1].replace(/\+/g, " "));
        };
        var putInToStore = function (name, value) {
            var c_name = name;
            var exdays = 300;
            var exdate = new Date();
            exdate.setDate(exdate.getDate() + exdays);
            var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
            //document.cookie = c_name + "=" + c_value + ";path=/;";
            if (document.domain === 'localhost') {
                document.cookie = c_name + "=" + c_value + ";path=/;";
            } else {
                document.cookie = c_name + "=" + c_value + ';domain=.' + document.domain + ';path=/;';
            }
        }
        var getFromStore = function (name) {
            var c_name = name;
            var i, x, y, ARRcookies = document.cookie.split(";").reverse();
            for (i = 0; i < ARRcookies.length; i++) {
                x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
                y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
                x = x.replace(/^\s+|\s+$/g, "");
                if (x == c_name) {
                    return unescape(y);
                }
            }
        }
        var removeFromStore = function (name, path, domain) {
            if (path)
                document.cookie = name + "=" + ((path) ? ";path=" + path : "") + ((domain) ? ";domain=" + domain : "") + ";expires=Thu, 01 Jan 1970 00:00:01 GMT";
            else
                document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        }
        var focusStep = function (dom) {
            $('body,html').animate({
                scrollTop: $("." + dom).offset().top - 30
            }, 600);
            $(".loading").hide();
        }
        var changeService = function (service) {
            if (!service)
                service = document.getElementById("ddnservice").value;
            if (service == "csv") {
                $(".outlook").show();
                $(".nonoutlook,.nonoutlookcontacts,#portalid,.directlogin").hide();
            }
            else if (service == "hubspot") {
                $(".outlook,.directlogin").hide();
                $(".nonoutlook,.nonoutlookcontacts,#portalid").show();
            }
            else if (service == "pipedrive" || service == "onepage" || service == "karma" || service == "contactually") {
                $(".outlook,.nonoutlook,#portalid").hide();
                $(".directlogin,.nonoutlookcontacts").show();
            }
            else {
                $(".outlook,#portalid,.directlogin").hide();
                $(".nonoutlook,.nonoutlookcontacts").show();
            }
        }
        var setService = function (service) {
            document.getElementById("ddnservice").value = service;
            $("#ddnservice").change();
            $(".loading").hide();
        }
    </script>
    <script type="text/javascript">
        /*
        *
        *   PREREQUESITE STEP 1: Formatting the license key
        *
        */

        //Code to Format the license key
        var licenses = "lic_247b5f4e-bc6f-4c0f-93a0-20e9d"; //comma seperated
        SI.initialize({
            //Your original license key here
            license: licenses,
            callback: function (sigData) {
                //Get your formatted signature key here
                document.getElementById("formattedKey").value = sigData[licenses];
            }
        });
        



        /* 
        *
        *   PREREQUESITE STEP 2: Declaration
        *
        */
        var APIKey = "Your API key here";
        var APISecretKey = "Your API Secret key here";
        var RedirectUrl = "http://localhost:64413/socialinviter_REST_js/crmcontactimporter.html";
        
        $("#authConsumerKey").val(APIKey);
        $("#authConsumerSecret").val(APISecretKey);
        $("#authRedirectUrl").val(RedirectUrl);


        /* 
        *
        *   STEP 1: Getting authentication url
        *
        */
        var getAuthUrl = function () {
            var authRequestUrl = "https://socialinviter.com/api/crmcontacts.aspx?";
            authRequestUrl += "service=" + $("#ddnservice").val();
            authRequestUrl += "&type=authenticationurl";
            authRequestUrl += "&consumerkey=" + $("#authConsumerKey").val();
            authRequestUrl += "&consumersecret=" + $("#authConsumerSecret").val();
            if ($("#ddnservice").val() == "hubspot") {
                putInToStore("portal", $("#txtportalid").val());
                authRequestUrl += "&portal=" + $("#txtportalid").val();
            }
            authRequestUrl += "&returnurl=" + $("#authRedirectUrl").val();
            authRequestUrl += "&signaturekey=" + $("#formattedKey").val();

            putInToStore("consumerkey", $("#authConsumerKey").val());
            putInToStore("consumersecret", $("#authConsumerSecret").val());
            putInToStore("returnurl", $("#authRedirectUrl").val());

            

            changeService($("#ddnservice").val());
            putInToStore("authrequest", authRequestUrl);
            putInToStore("service", $("#ddnservice").val());
            $("#authRequest").val(authRequestUrl);
            $.get(authRequestUrl, function (response) {
                $("#authResponse").val(response);
                var respObj = $.parseJSON(response).data;
                $("#txtAuthUrl").val(respObj.authurl);
                $("#accToken").val(respObj.token);
                $("#accTokenSecret").val(respObj.tokensecret);
                $("#accTokenVerifier").val(respObj.tokenverifier);
                putInToStore("authresponse", response);
                focusStep('step2');
                $(".loading").hide();
            });
            $(".loading").show();
        }

        /* 
        *
        *   STEP 2: Redirecting user for authentication
        *
        */
        var authUser = function () {
            window.location.href = $("#txtAuthUrl").val();
        }


        /* 
        *
        *   STEP 3: Page load function to extract the token/code and verifier values
        *
        */
        var pageLoad = function () {
            if (getQueryString("code", window.location.href) != "" || getQueryString("oauth_token", window.location.href) != "" || getQueryString("refresh_token", window.location.href) != "") {
                var service = getFromStore("service");
                $("#ddnservice").val(service);
                var response = getFromStore("authresponse");
                $("#authResponse").val(response);
                $("#authRequest").val(getFromStore("authrequest"));
                var respObj = $.parseJSON(response).data;
                $("#txtAuthUrl").val(respObj.authurl);
                $("#accToken").val(respObj.token);
                $("#accTokenSecret").val(respObj.tokensecret);
                $("#accTokenVerifier").val(respObj.tokenverifier);

                $("#authConsumerKey").val(getFromStore("consumerkey"));
                $("#authConsumerSecret").val(getFromStore("consumersecret"));
                $("#authRedirectUrl").val(getFromStore("returnurl"));
                if (service == "hubspot") {
                    $("#txtportalid").val(getFromStore("portal"));
                    $("#portalid").show();
                }
                if (getQueryString("code", window.location.href) != "") {
                    $("#accToken").val(getQueryString("code", window.location.href));
                }
                else if (getQueryString("refresh_token", window.location.href) != "") {
                    $("#accToken").val(getQueryString("refresh_token", window.location.href));
                }
                else if (getQueryString("oauth_token", window.location.href) != "") {
                    $("#accToken").val(getQueryString("oauth_token", window.location.href));
                    $("#accTokenVerifier").val(getQueryString("oauth_verifier", window.location.href));
                }
                focusStep('step3');
            }
            else {
                removeFromStore("authrequest");
                removeFromStore("authresponse");
                removeFromStore("accessrequest");
                removeFromStore("accessresponse");
            }
        }

        /* 
        *
        *   STEP 4: Getting access token using the authentication token/code
        *
        */
        var getAccTok = function () {
            var accessRequestUrl = "https://socialinviter.com/api/crmcontacts.aspx?";
            accessRequestUrl += "service=" + $("#ddnservice").val();
            accessRequestUrl += "&type=accesstoken";
            accessRequestUrl += "&consumerkey=" + $("#authConsumerKey").val();
            accessRequestUrl += "&consumersecret=" + $("#authConsumerSecret").val();
            accessRequestUrl += "&returnurl=" + $("#authRedirectUrl").val();
            accessRequestUrl += "&token=" + $("#accToken").val();
            accessRequestUrl += "&tokensecret=" + $("#accTokenSecret").val();
            accessRequestUrl += "&tokenverifier=" + $("#accTokenVerifier").val();
            accessRequestUrl += "&signaturekey=" + $("#formattedKey").val();
            putInToStore("accessrequest", accessRequestUrl);
            $("#accessRequest").val(accessRequestUrl);
            $.get(accessRequestUrl, function (response) {
                $("#accessResponse").val(response);
                var accessObj = $.parseJSON(response).data;
                $("#conToken").val(unescape(accessObj.token));
                $("#conTokenSecret").val(accessObj.tokensecret);
                $("#conTokenVerifier").val(accessObj.tokenverifier);
                $("#conUserId").val(accessObj.userid);
                putInToStore("accessresponse", response);
                focusStep('step4');
            });
            $(".loading").show();
        }

        var getAccessTokenDirect = function () {
            var accessRequestUrl = "https://socialinviter.com/api/crmcontacts.aspx?";
            accessRequestUrl += "service=" + $("#ddnservice").val();
            accessRequestUrl += "&type=login";
            accessRequestUrl += "&email=" + $("#txtemail").val();
            accessRequestUrl += "&password=" + $("#txtpassword").val();
            accessRequestUrl += "&signaturekey=" + $("#formattedKey").val();
            putInToStore("accessrequest", accessRequestUrl);
            $("#accessRequestDirect").val(accessRequestUrl);
            $.get(accessRequestUrl, function (response) {
                $("#accessResponseDirect").val(response);
                var accessObj = $.parseJSON(response).data;
                $("#conToken").val(unescape(accessObj.token));
                $("#conTokenSecret").val(accessObj.tokensecret);
                $("#conTokenVerifier").val(accessObj.tokenverifier);
                $("#conUserId").val(accessObj.userid);
                putInToStore("accessresponse", response);
                var service = $("#ddnservice").val();
                changeService(service);
                if (service == "pipedrive" || service == "onepage" || service == "karma" || service == "contactually") {
                    focusStep('step2direct');
                }
                else {
                    focusStep('step4');
                }
            });
            $(".loading").show();
        }

        /* 
        *
        *   STEP 5: Importing contacts
        *
        */
        var getContacts = function () {
            var conRequestUrl = "https://socialinviter.com/api/crmcontacts.aspx?";
            conRequestUrl += "service=" + $("#ddnservice").val();
            conRequestUrl += "&type=contacts";
            conRequestUrl += "&consumerkey=" + $("#authConsumerKey").val();
            conRequestUrl += "&consumersecret=" + $("#authConsumerSecret").val();
            conRequestUrl += "&returnurl=" + encodeURIComponent($("#authRedirectUrl").val());
            conRequestUrl += "&token=" + encodeURIComponent($("#conToken").val());
            conRequestUrl += "&tokensecret=" + $("#conTokenSecret").val();
            conRequestUrl += "&tokenverifier=" + $("#conTokenVerifier").val();
            conRequestUrl += "&userid=" + $("#conUserId").val();
            conRequestUrl += "&signaturekey=" + $("#formattedKey").val();

            $("#conRequest").val(conRequestUrl);
            $.get(conRequestUrl, function (response) {
                $("#conResponse").val(unescape(response));
                $(".loading").hide();
            });
            $(".loading").show();
        }
        var getOutlookContacts = function () {
            var conRequestUrl = "https://socialinviter.com/api/crmcontacts.aspx?";
            conRequestUrl += "service=" + $("#ddnservice").val();
            conRequestUrl += "&type=contacts";
            conRequestUrl += "&uploadedfile=" + $("#txtcsvurl").val();
            conRequestUrl += "&signaturekey=" + $("#formattedKey").val();
            changeService($("#ddnservice").val());
            $("#csvRequest").val(conRequestUrl);
            $.get(conRequestUrl, function (response) {
                $("#csvResponse").val(unescape(response));
                $(".loading").hide();
            });
            $(".loading").show();
        }


        pageLoad();
        

    </script>

    <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
</body>
</html>

