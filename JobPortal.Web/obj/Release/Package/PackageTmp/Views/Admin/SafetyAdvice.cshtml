@model JobPortal.Web.Models.SafetyAdviceModel
@{
    ViewBag.Title = "Safety Advice";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="~/Scripts/tinymce/tinymce.min.js"></script>
<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
        <div class="title-login">
            <h1 style="margin-top:-15px">Safety Advice</h1>
            Mange Safety Advice here
        </div>
    </div>
</div>
@Html.Partial("_MessagePartial")

<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
        @using (Html.BeginForm("SafetyAdvice", "Admin", FormMethod.Post))
        {
            <div class="form-group">
                <label for="advice">Write safety advice here</label>
                @Html.TextAreaFor(m => m.Advice, new { @class="form-control", style="height:300px", maxlength=500})
                <div id="chars_left"></div>
            </div>
            <div>
                <input id="Save" type="submit" class="btn btn-info" value="Submit">
            </div>
        }
    </div>
</div>
<script>
    $(document).ready(function () {

        var max_chars = 500; //max characters
       
        tinymce.init({
            selector: 'textarea', plugins: "link", toolbar: "bullist | numlist | outdent | bold | italic | underline ", menubar: false, statusbar: false, height: "400px",
            paste_as_text: true,
            plugins: "paste",
            setup: function (ed) {
                ed.on('init', function () {
                    this.execCommand("fontName", false, "Arial");
                    this.execCommand("fontSize", false, "13.3333px");
                    $("#Advice").focus();
                });
            },
        });

        $("#Save").click(function () {
            if (getStats('Advice').chars > max_chars) {
                $('#chars_left').html("<b style=\"color:red\">Maximum " + (max_chars) + " characters!</b>");
                return false;
            } else {
                $('#chars_left').html("");
            }
        });

    });

    function getStats(id) {
        var body = tinymce.get(id).getBody(), text = tinymce.trim(body.innerText || body.textContent);

        return {
            chars: text.length,
            words: text.split(/[\w\u2019\'-]+/).length
        };
    }
</script>