@model JobPortal.Web.Models.SMJobModel
@using JobPortal.Domain
@{
    ViewBag.Title = "Edit - Social Media Job List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="~/Scripts/tinymce/tinymce.min.js"></script>
<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
        <div class="title-login">
            <h1 style="margin-top:-15px">Edit</h1>
            Update Social Media Job List  here
        </div>
    </div>
</div>
<div class="clear" style="height:15px;"></div>

@using (Html.BeginForm())
{
<div>
    @Html.ValidationSummary(true)
    <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-6">
            <div class="form-group">
                @Html.Label("Search By Country")
                @Html.DropDownList("CountryName", new SelectList(SharedService.Instance.GetCountryList(), "Text", "Text"), "SELECT COUNTRY", new { @class = "form-control" })

            </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6">
            <div class="form-group">
                @Html.LabelFor(model => model.CompanyName)

                @Html.TextBoxFor(model => model.CompanyName, new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.CompanyName)
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-6">
            <div class="form-group">
                @Html.LabelFor(model => model.ContactNo)

                @Html.TextBoxFor(model => model.ContactNo, new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.ContactNo)
            </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6">
            <div class="form-group">
                @Html.LabelFor(model => model.Email)

                @Html.TextBoxFor(model => model.Email, new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.Email)
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-6">
            <div class="form-group">
                @Html.LabelFor(model => model.JobLink)

                @Html.TextBoxFor(model => model.JobLink, new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.JobLink)
            </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6">
            <div class="form-group">
                @Html.LabelFor(model => model.JobTitle)

                @Html.TextBoxFor(model => model.JobTitle, new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.JobTitle)
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-6">
            <div class="form-group">
                @Html.LabelFor(model => model.JobSource)

                @Html.TextBoxFor(model => model.JobSource, new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.JobSource)
            </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6">
            <div class="form-group">
                @Html.LabelFor(model => model.Name)

                @Html.TextBoxFor(model => model.Name, new { @class = "form-control" })
              
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="form-group">
                @Html.LabelFor(model => model.MSkills)

                @Html.TextBoxFor(model => model.MSkills, new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.MSkills)
            </div>
        </div>
    </div>
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <h4 style="line-height: 0px;">
                    <b>@Html.LabelFor(model => model.JobDescription)</b> <small>(Min. 100 and Max. 2000 characters)</small>
                </h4>
                <input type="hidden" id="JobDescription" name="JobDescription" />
                <div id="SummaryEditor">
                    <div class="toolbar">
                        <a href="#" data-command='indent'>
                            <svg style="width:21px; height:21px;">
                                <g id="format-indent-increase"><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z" /></g>
                            </svg>
                        </a>
                        <a href="#" data-command='outdent'>
                            <svg style="width:21px; height:21px;">
                                <g id="format-indent-decrease"><path d="M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z" /></g>
                            </svg>
                        </a>
                        <a href="#" data-command='insertUnorderedList'><svg style="width:21px; height:21px;"><g id="format-list-bulleted"><path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12.17c-.74 0-1.33.6-1.33 1.33s.6 1.33 1.33 1.33 1.33-.6 1.33-1.33-.59-1.33-1.33-1.33zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z" /></g></svg></a>
                        <a href="#" data-command='insertOrderedList'><svg style="width:21px; height:21px;"><g id="format-list-numbered"><path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z" /></g></svg></a>
                    </div>
                    <div class="editor form-control" style="height:200px; overflow-x:hidden; overflow-y:auto" data-field="JobDescription" contenteditable>
                        @Html.Raw(Model.JobDescription)
                    </div>
                    <div id="chars_left"></div>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <h4 style="line-height: 0px;">
                    <b>@Html.LabelFor(model => model.JobResponsibility)</b> <small>(Min. 10 and Max. 2000 characters)</small>
                </h4>
                <input type="hidden" id="JobResponsibility" name="JobResponsibility" />
                <div id="SummaryEditor">
                    <div class="toolbar">
                        <a href="#" data-command='indent'>
                            <svg style="width:21px; height:21px;">
                                <g id="format-indent-increase"><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z" /></g>
                            </svg>
                        </a>
                        <a href="#" data-command='outdent'>
                            <svg style="width:21px; height:21px;">
                                <g id="format-indent-decrease"><path d="M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z" /></g>
                            </svg>
                        </a>
                        <a href="#" data-command='insertUnorderedList'><svg style="width:21px; height:21px;"><g id="format-list-bulleted"><path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12.17c-.74 0-1.33.6-1.33 1.33s.6 1.33 1.33 1.33 1.33-.6 1.33-1.33-.59-1.33-1.33-1.33zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z" /></g></svg></a>
                        <a href="#" data-command='insertOrderedList'><svg style="width:21px; height:21px;"><g id="format-list-numbered"><path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z" /></g></svg></a>
                    </div>
                    <div class="editor form-control" style="height:200px; overflow-x:hidden; overflow-y:auto" data-field="JobResponsibility" contenteditable>
                        @Html.Raw(Model.JobResponsibility)
                    </div>
                    <div id="chars_left"></div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <h4 style="line-height: 0px;">
                    <b>@Html.LabelFor(model => model.JobRequirement)</b> <small>(Min. 10 and Max. 2000 characters)</small>
                </h4>
                <input type="hidden" id="JobRequirement" name="JobRequirement" />
                <div id="SummaryEditor">
                    <div class="toolbar">
                        <a href="#" data-command='indent'>
                            <svg style="width:21px; height:21px;">
                                <g id="format-indent-increase"><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z" /></g>
                            </svg>
                        </a>
                        <a href="#" data-command='outdent'>
                            <svg style="width:21px; height:21px;">
                                <g id="format-indent-decrease"><path d="M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z" /></g>
                            </svg>
                        </a>
                        <a href="#" data-command='insertUnorderedList'><svg style="width:21px; height:21px;"><g id="format-list-bulleted"><path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12.17c-.74 0-1.33.6-1.33 1.33s.6 1.33 1.33 1.33 1.33-.6 1.33-1.33-.59-1.33-1.33-1.33zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z" /></g></svg></a>
                        <a href="#" data-command='insertOrderedList'><svg style="width:21px; height:21px;"><g id="format-list-numbered"><path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z" /></g></svg></a>
                    </div>
                    <div class="editor form-control" style="height:200px; overflow-x:hidden; overflow-y:auto" data-field="JobRequirement" contenteditable>
                        @Html.Raw(Model.JobRequirement)
                    </div>
                    <div id="chars_left"></div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 text-right">
                <div class="form-group">
                    @Html.ActionLink("Back", "SMJobs", null, new { @class = "btn btn-default", @style = "width:75px;" }) &nbsp;<input type="submit" value="Submit" class="btn btn-info" style="width:75px;" />
                </div>
            </div>
        </div>
    </div>

    }
    <script type="text/javascript">

        $(document).ready(function () {

            var max_chars = 2000; //max characters
            var max_for_html = 2000; //max characters for html tags
            var allowed_keys = [8, 13, 16, 17, 18, 20, 33, 34, 35, 36, 37, 38, 39, 40, 46];
            var chars_without_html = 0;
            var chars_with_html = 0;

            function alarmChars() {
                if (chars_without_html > (max_chars - 25)) {
                    $('#chars_left').css('color', 'red');
                } else {
                    $('#chars_left').css('color', 'gray');
                }
            }

            var colorPalette = ['000000', 'FF9966', '6699FF', '99FF66', 'CC0000', '00CC00', '0000CC', '333333', '0066FF', 'FFFFFF'];
            var forePalette = $('.fore-palette');
            var backPalette = $('.back-palette');

            for (var i = 0; i < colorPalette.length; i++) {
                forePalette.append('<a href="#" data-command="forecolor" data-value="' + '#' + colorPalette[i] + '" style="background-color:' + '#' + colorPalette[i] + ';" class="palette-item"></a>');
                backPalette.append('<a href="#" data-command="backcolor" data-value="' + '#' + colorPalette[i] + '" style="background-color:' + '#' + colorPalette[i] + ';" class="palette-item"></a>');
            }

            $(".editor").bind("paste", function (e) {
                var pastedData = e.originalEvent.clipboardData.getData('text');
                document.execCommand('insertText', false, pastedData);
                return false;
            });

            $(".editor").mouseout(function () {
                var txt = $(this).text();
                console.log(txt);
                if ($.trim(txt).length > 0) {
                    $("#" + $(this).data("field")).val($(this).html());
                }
            });

            $(".editor").keydown(function (e) {
                chars_with_html = $(this).html().length;
                var key = e.which;
                $('#chars_left').html("<b style=\"color:red\">Remaining characters:</b> " + (max_for_html - chars_with_html));

                if (allowed_keys.indexOf(key) != -1) {
                    alarmChars();
                    return;
                }

                if (chars_with_html > max_for_html) {
                    return false;
                }
                alarmChars();
            });

            $(".editor").blur(function () {
                var txt = $(this).text();
                console.log(txt);
                if ($.trim(txt).length > 0) {
                    $("#" + $(this).data("field")).val($(this).html());
                }
            });

            $('.toolbar a').click(function (e) {
                var command = $(this).data('command');
                if (command == 'h1' || command == 'h2' || command == 'p') {
                    document.execCommand('formatBlock', false, command);
                }
                if (command == 'forecolor' || command == 'backcolor') {
                    document.execCommand($(this).data('command'), false, $(this).data('value'));
                }
                if (command == 'createlink' || command == 'insertimage') {
                    url = prompt('Enter the link here: ', 'http:\/\/');
                    document.execCommand($(this).data('command'), false, url);
                } else document.execCommand($(this).data('command'), false, null);

                return false;
            });

            chars_without_html = $.trim($(".editor").html().replace(/(<([^>]+)>)/ig, "")).length;
            $('#chars_left').html("<b style=\"color:#000\">Remaining characters:</b> " + (max_chars - chars_without_html));
            alarmChars();


        });

        $('._reset').click(function () {
            $('._Value').val('');
        })



    </script>
    <script>
        tinymce.init({ selector: '#Body', plugins: "link", toolbar: "bold | italic | underline | strikethrough | alignleft | aligncenter | alignright | alignjustify | styleselect | formatselect | fontselect | fontsizeselect | bullist | numlist | outdent | indent | blockquote | undo | redo | removeformat | subscript | superscript | link", menubar: false, height: "285px" });
    </script>
